<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aggregates Ceteris Paribus Profiles — aggregate_profiles • ingredients</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- dalexverse --><link href="../dalexverse.css" rel="stylesheet"><link href="../dalexverse-2.css" rel="stylesheet"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregates Ceteris Paribus Profiles — aggregate_profiles"><meta property="og:description" content="The function aggregate_profiles() calculates an aggregate of ceteris paribus profiles.
It can be: Partial Dependence Profile (average across Ceteris Paribus Profiles),
Conditional Dependence Profile (local weighted average across Ceteris Paribus Profiles) or
Accumulated Local Dependence Profile (cummulated average local changes in Ceteris Paribus Profiles)."><meta property="og:image" content="/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script></head><body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">ingredients</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy" class="external-link">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/" class="external-link">MI^2 DataLab</a> </span>
          <span class="version version-default">2.3.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vignette_describe.html">Explanations in natural language</a>
    </li>
    <li>
      <a href="../articles/vignette_simulated.html">Simulated data, real problem</a>
    </li>
    <li>
      <a href="../articles/vignette_titanic.html">General introduction: Survival on the RMS Titanic</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/ingredients/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregates Ceteris Paribus Profiles</h1>
    <small class="dont-index">Source: <a href="https://github.com/ModelOriented/ingredients/blob/HEAD/R/aggregate_profiles.R" class="external-link"><code>R/aggregate_profiles.R</code></a></small>
    <div class="hidden name"><code>aggregate_profiles.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function <code>aggregate_profiles()</code> calculates an aggregate of ceteris paribus profiles.
It can be: Partial Dependence Profile (average across Ceteris Paribus Profiles),
Conditional Dependence Profile (local weighted average across Ceteris Paribus Profiles) or
Accumulated Local Dependence Profile (cummulated average local changes in Ceteris Paribus Profiles).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">aggregate_profiles</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  variable_type <span class="op">=</span> <span class="st">"numerical"</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"partial"</span>,</span>
<span>  variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  span <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a ceteris paribus explainer produced with function <code><a href="ceteris_paribus.html">ceteris_paribus()</a></code></p></dd>


<dt>...</dt>
<dd><p>other explainers that shall be calculated together</p></dd>


<dt>variable_type</dt>
<dd><p>a character. If <code>numerical</code> then only numerical variables will be calculated.
If <code>categorical</code> then only categorical variables will be calculated.</p></dd>


<dt>groups</dt>
<dd><p>a variable name that will be used for grouping.
By default <code>NULL</code> which means that no groups shall be calculated</p></dd>


<dt>type</dt>
<dd><p>either <code>partial/conditional/accumulated</code> for partial dependence, conditional profiles of accumulated local effects</p></dd>


<dt>variables</dt>
<dd><p>if not <code>NULL</code> then aggregate only for selected <code>variables</code> will be calculated</p></dd>


<dt>span</dt>
<dd><p>smoothing coefficient, by default <code>0.25</code>. It's the sd for gaussian kernel</p></dd>


<dt>center</dt>
<dd><p>by default accumulated profiles start at 0. If <code>center=TRUE</code>, then they are centered around mean prediction,
which is calculated on the observations used in <code>ceteris_paribus</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>an object of the class <code>aggregated_profiles_explainer</code></p>


    </div>
    <div id="references">
    <h2>References</h2>
    <p>Explanatory Model Analysis. Explore, Explain, and Examine Predictive Models. <a href="https://ema.drwhy.ai/" class="external-link">https://ema.drwhy.ai/</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://modeloriented.github.io/DALEX/" class="external-link">"DALEX"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ModelOriented.github.io/ingredients/" class="external-link">"ingredients"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/imbs-hl/ranger" class="external-link">"ranger"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">titanic_imputed</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   gender age class    embarked  fare sibsp parch survived</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   male  42   3rd Southampton  7.11     0     0        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   male  13   3rd Southampton 20.05     0     2        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   male  16   3rd Southampton 20.05     1     1        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 female  39   3rd Southampton 20.05     1     1        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 female  16   3rd Southampton  7.13     0     0        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   male  25   3rd Southampton  7.13     0     0        1</span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">model_titanic_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ranger/man/ranger.html" class="external-link">ranger</a></span><span class="op">(</span><span class="va">survived</span> <span class="op">~</span><span class="va">.</span>,  data <span class="op">=</span> <span class="va">titanic_imputed</span>, probability <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">explain_titanic_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://modeloriented.github.io/DALEX/reference/explain.html" class="external-link">explain</a></span><span class="op">(</span><span class="va">model_titanic_rf</span>,</span></span>
<span class="r-in"><span>                              data <span class="op">=</span> <span class="va">titanic_imputed</span><span class="op">[</span>,<span class="op">-</span><span class="fl">8</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                              y <span class="op">=</span> <span class="va">titanic_imputed</span><span class="op">[</span>,<span class="fl">8</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                              label <span class="op">=</span> <span class="st">"ranger forest"</span>,</span></span>
<span class="r-in"><span>                              verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">selected_passangers</span> <span class="op">&lt;-</span> <span class="fu"><a href="select_sample.html">select_sample</a></span><span class="op">(</span><span class="va">titanic_imputed</span>, n <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cp_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="ceteris_paribus.html">ceteris_paribus</a></span><span class="op">(</span><span class="va">explain_titanic_rf</span>, <span class="va">selected_passangers</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cp_rf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top profiles    : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        gender age            class    embarked    fare sibsp parch    _yhat_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 515    female  45              2nd Southampton 10.1000     0     0 0.8330857</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 515.1    male  45              2nd Southampton 10.1000     0     0 0.1110373</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 604    female  17              3rd Southampton  7.1701     1     0 0.4537351</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 604.1    male  17              3rd Southampton  7.1701     1     0 0.1147693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1430   female  25 engineering crew Southampton  0.0000     0     0 0.7671187</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1430.1   male  25 engineering crew Southampton  0.0000     0     0 0.2349133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        _vname_ _ids_       _label_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 515     gender   515 ranger forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 515.1   gender   515 ranger forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 604     gender   604 ranger forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 604.1   gender   604 ranger forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1430    gender  1430 ranger forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1430.1  gender  1430 ranger forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top observations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      gender age            class    embarked    fare sibsp parch    _yhat_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 515    male  45              2nd Southampton 10.1000     0     0 0.1110373</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 604    male  17              3rd Southampton  7.1701     1     0 0.1147693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1430   male  25 engineering crew Southampton  0.0000     0     0 0.2349133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 865    male  20              3rd   Cherbourg  7.0406     0     0 0.1252685</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 452  female  17              3rd  Queenstown  7.1408     0     0 0.6597175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1534   male  38 victualling crew Southampton  0.0000     0     0 0.1699457</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            _label_ _ids_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 515  ranger forest     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 604  ranger forest     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1430 ranger forest     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 865  ranger forest     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 452  ranger forest     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1534 ranger forest     6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># continuous variable</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_p</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span>, type <span class="op">=</span> <span class="st">"partial"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_p</span><span class="op">$</span><span class="va">`_label_`</span> <span class="op">&lt;-</span> <span class="st">"RF_partial"</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_c</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span>, type <span class="op">=</span> <span class="st">"conditional"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_c</span><span class="op">$</span><span class="va">`_label_`</span> <span class="op">&lt;-</span> <span class="st">"RF_conditional"</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_a</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span>, type <span class="op">=</span> <span class="st">"accumulated"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_a</span><span class="op">$</span><span class="va">`_label_`</span> <span class="op">&lt;-</span> <span class="st">"RF_accumulated"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pdp_rf_p</span>, <span class="va">pdp_rf_c</span>, <span class="va">pdp_rf_a</span>, color <span class="op">=</span> <span class="st">"_label_"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="aggregate_profiles-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pdp_rf</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span>,</span></span>
<span class="r-in"><span>                             groups <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pdp_rf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top profiles    : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   _vname_              _label_        _x_ _groups_    _yhat_ _ids_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     age ranger forest_female  0.1666667   female 0.7345625     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     age ranger forest_female  2.0000000   female 0.7218844     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     age ranger forest_female  4.0000000   female 0.7443284     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     age ranger forest_female  7.0000000   female 0.7187404     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     age ranger forest_female  9.0000000   female 0.7245856     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     age ranger forest_female 13.0000000   female 0.7383263     0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="show_observations.html">show_observations</a></span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="show_rugs.html">show_rugs</a></span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"age"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="show_aggregated_profiles.html">show_aggregated_profiles</a></span><span class="op">(</span><span class="va">pdp_rf</span>, size <span class="op">=</span> <span class="fl">3</span>, color <span class="op">=</span> <span class="st">"_label_"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="aggregate_profiles-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># categorical variable</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_p</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"class"</span>,</span></span>
<span class="r-in"><span>                               variable_type <span class="op">=</span> <span class="st">"categorical"</span>,  type <span class="op">=</span> <span class="st">"partial"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_p</span><span class="op">$</span><span class="va">`_label_`</span> <span class="op">&lt;-</span> <span class="st">"RF_partial"</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_c</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"class"</span>,</span></span>
<span class="r-in"><span>                               variable_type <span class="op">=</span> <span class="st">"categorical"</span>, type <span class="op">=</span> <span class="st">"conditional"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_c</span><span class="op">$</span><span class="va">`_label_`</span> <span class="op">&lt;-</span> <span class="st">"RF_conditional"</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_a</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"class"</span>,</span></span>
<span class="r-in"><span>                               variable_type <span class="op">=</span> <span class="st">"categorical"</span>, type <span class="op">=</span> <span class="st">"accumulated"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pdp_rf_a</span><span class="op">$</span><span class="va">`_label_`</span> <span class="op">&lt;-</span> <span class="st">"RF_accumulated"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pdp_rf_p</span>, <span class="va">pdp_rf_c</span>, <span class="va">pdp_rf_a</span>, color <span class="op">=</span> <span class="st">"_label_"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="aggregate_profiles-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or maybe flipped?</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pdp_rf_p</span>, <span class="va">pdp_rf_c</span>, <span class="va">pdp_rf_a</span>, color <span class="op">=</span> <span class="st">"_label_"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="aggregate_profiles-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pdp_rf</span> <span class="op">&lt;-</span> <span class="fu">aggregate_profiles</span><span class="op">(</span><span class="va">cp_rf</span>, variables <span class="op">=</span> <span class="st">"class"</span>, variable_type <span class="op">=</span> <span class="st">"categorical"</span>,</span></span>
<span class="r-in"><span>                             groups <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pdp_rf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top profiles    : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    _vname_              _label_ _x_ _groups_    _yhat_ _ids_</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    class ranger forest_female 1st   female 0.8708085     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    class   ranger forest_male 1st     male 0.3457692     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    class ranger forest_female 2nd   female 0.8430490     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    class   ranger forest_male 2nd     male 0.2090683     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    class ranger forest_female 3rd   female 0.5515893     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   class   ranger forest_male 3rd     male 0.2288376     0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pdp_rf</span>, variables <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="aggregate_profiles-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># or maybe flipped?</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pdp_rf</span>, variables <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="aggregate_profiles-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>.</p>
</div>

      </footer></div>

  


  </body></html>

